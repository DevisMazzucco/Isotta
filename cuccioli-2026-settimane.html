<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title data-it="Cuccioli Bobtail 2026 – Settimana per settimana"
         data-en="Bobtail Puppies 2026 – Week by week">
         Cuccioli Bobtail 2026 – Settimana per settimana
  </title>

  <meta name="description"
        data-it="Crescita dei cuccioli Bobtail 2026 settimana per settimana: foto, sviluppo, carattere e aggiornamenti."
        data-en="Growth of Bobtail puppies 2026 week by week: photos, development, temperament and updates.">

  <style>

    /* ===========================
       BASE
    ============================ */
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #0f0f0f;
      color: #e6e6e6;
      animation: fadeIn 0.6s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ===========================
       HEADER
    ============================ */
    header {
      text-align: center;
      padding: 50px 20px 40px;
      background: url('img/header-dog.jpeg') center/cover no-repeat;
      color: white;
      position: relative;
      box-shadow: 0 0 25px rgba(0,0,0,0.5);
    }

    header::before {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.55);
    }

    header * { position: relative; z-index: 1; }

    header h1 {
      margin: 0;
      font-size: 2.6em;
      text-shadow: 0 0 12px black;
      letter-spacing: 1px;
    }

    header p {
      font-size: 1.25em;
      opacity: 0.9;
      margin-top: 10px;
    }

    #lang-select {
      margin-top: 18px;
      padding: 6px 12px;
      font-size: 1em;
      border-radius: 6px;
      border: 1px solid #444;
      background: #1a1a1a;
      color: #eee;
      cursor: pointer;
    }

    /* ===========================
       MENU LATERALE
    ============================ */
    #side-menu {
      position: fixed;
      top: 140px;
      left: 20px;
      background: #1a1a1a;
      padding: 22px;
      border-radius: 14px;
      border: 1px solid #333;
      box-shadow: 0 0 18px rgba(0,0,0,0.4);
      z-index: 999;
      backdrop-filter: blur(4px);
    }

    #side-menu a {
      display: block;
      color: #e6e6e6;
      text-decoration: none;
      margin-bottom: 12px;
      font-size: 1em;
      transition: 0.25s ease;
    }

    #side-menu a:hover {
      color: #A39261;
      transform: translateX(4px);
    }

    /* ===========================
       SEZIONI
    ============================ */
    section {
      width: 85%;
      max-width: 900px;
      margin: 40px auto;
      padding: 45px;
      background: #141414;
      border-radius: 20px;
      border: 1px solid #222;
      box-shadow: 0 0 25px rgba(0,0,0,0.4);
    }

    h2 {
      font-size: 2em;
      margin-bottom: 20px;
      border-left: 4px solid #010E80;
      padding-left: 12px;
      letter-spacing: 0.5px;
    }

    .week-block {
      margin-top: 40px;
      padding: 28px;
      background: #1a1a1a;
      border-radius: 18px;
      border: 1px solid #333;
      box-shadow: 0 0 18px rgba(0,0,0,0.35);
      transition: 0.3s ease;
    }

    .week-block:hover {
      transform: translateY(-3px);
      box-shadow: 0 0 25px rgba(0,0,0,0.5);
    }

    .week-block h3 {
      margin-top: 0;
      font-size: 1.55em;
      border-left: 4px solid #A39261;
      padding-left: 10px;
      letter-spacing: 0.3px;
    }

/* ===========================
   CAROSELLO — STRUTTURA
=========================== */
.carousel {
  position: relative;
  overflow: hidden;
  border-radius: 14px;
  margin-top: 20px;
}

.carousel-track {
  display: flex;
  transition: transform 0.35s ease;
}

.carousel img {
  height: 120px;
  width: auto;
  border-radius: 12px;
  cursor: pointer;
  transition: transform 0.25s ease, opacity 0.25s ease, box-shadow 0.25s ease;
  object-fit: cover;
  border: 1px solid rgba(163,146,97,0.35);
}

.carousel img:hover {
  transform: scale(1.06);
  opacity: 0.95;
  box-shadow: 0 0 12px rgba(163,146,97,0.45);
}

/* ===========================
   FRECCE SOTTO
=========================== */
.carousel-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 22px;
  margin-top: 14px;
}

.carousel-btn {
  background: rgba(0,0,0,0.55);
  border: none;
  color: white;
  padding: 10px 14px;
  cursor: pointer;
  border-radius: 10px;
  transition: 0.25s ease;
  font-size: 1.4em;
}

.carousel-btn:hover {
  background: rgba(163,146,97,0.8);
}

/* ===========================
   INDICATORI ● ● ●
=========================== */
.carousel-indicators {
  text-align: center;
  margin-top: 10px;
}

.carousel-indicators span {
  display: inline-block;
  width: 8px;
  height: 8px;
  margin: 0 4px;
  background: #444;
  border-radius: 50%;
  transition: 0.25s ease;
}

.carousel-indicators .active {
  background: #010E80 !important;
  transform: scale(1.3);
}

    .btn-contact {
  display: inline-block;
  padding: 14px 26px;
  background: #010E80; /* blu Inter */
  color: white;
  text-decoration: none;
  border-radius: 12px;
  font-size: 1.15em;
  font-weight: 500;
  box-shadow: 0 0 14px rgba(0,0,0,0.35);
  transition: 0.25s ease;
  margin-top: 25px;
}

.btn-contact:hover {
  background: #A39261; /* oro */
  color: #000;
  transform: translateY(-2px);
  box-shadow: 0 0 18px rgba(0,0,0,0.45);
}

/* ===========================
   MOBILE
=========================== */
@media (max-width: 480px) {
  .carousel-controls {
    gap: 18px;
    margin-top: 12px;
  }

  .carousel-btn {
    padding: 8px 12px;
    font-size: 1.2em;
  }
}

    /* ===========================
       LIGHTBOX PREMIUM
    ============================ */
    #lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.88);
      display: none;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      z-index: 99999;
      backdrop-filter: blur(4px);
      transition: opacity 0.25s ease;
    }

    #lightbox img {
      max-width: 90%;
      max-height: 80%;
      border-radius: 14px;
      box-shadow: 0 0 30px rgba(0,0,0,0.6);
      transition: transform 0.25s ease;
    }

    #lightbox-caption {
      margin-top: 18px;
      color: #e6e6e6;
      font-size: 1.15em;
      text-align: center;
      max-width: 90%;
      opacity: 0.9;
    }

    .lightbox-arrow {
      position: fixed;
      top: 50%;
      transform: translateY(-50%);
      font-size: 3.2em;
      color: white;
      cursor: pointer;
      user-select: none;
      padding: 10px;
      transition: 0.25s ease;
    }

    .lightbox-arrow:hover {
      color: #A39261;
      transform: translateY(-50%) scale(1.15);
    }

    #lightbox-prev { left: 30px; }
    #lightbox-next { right: 30px; }

    /* ===========================
       GRAFICO
    ============================ */
    .chart-container {
      margin-top: 40px;
      background: #1a1a1a;
      padding: 25px;
      border-radius: 16px;
      border: 1px solid #333;
    }

/* ===========================
   STILE UNIFICATO PULSANTI FISSI
=========================== */
.fixed-btn {
  position: fixed;
  position: fixed;
  width: 58px;
  height: 58px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 1.8em;
  text-decoration: none;
  box-shadow: 0 0 18px rgba(0,0,0,0.45);
  transition: 0.25s ease;
  z-index: 9999;
  animation: pulse 2.4s infinite ease-in-out;
}



/* Hover */
.fixed-btn:hover {
  transform: scale(1.12);
  background: #A39261; /* oro */
  color: #000;
}

/* Pulsante Index (blu Inter) */
.back-to-index {
  bottom: 25px;
  left: 25px;
  background: #010E80;
}

/* Pulsante WhatsApp (verde ufficiale) */
.whatsapp-btn {
  bottom: 25px;
  right: 25px;
  background: #25D366; /* verde ufficiale WhatsApp */
}

/* Effetto pulse leggero */
@keyframes pulse {
  0%   { transform: scale(1); }
  50%  { transform: scale(1.08); }
  100% { transform: scale(1); }
}

/* MOBILE */
@media (max-width: 480px) {
  .fixed-btn {
    width: 50px;
    height: 50px;
    font-size: 1.5em;
  }

  .back-to-index {
    bottom: 16px;
    left: 16px;
  }

  .whatsapp-btn {
    bottom: 16px;
    right: 16px;
  }
}

/* MOBILE */
@media (max-width: 480px) {
  .fixed-btn {
    width: 50px;
    height: 50px;
    font-size: 1.5em;
  }

  .back-to-index {
    bottom: 16px;
    left: 16px;
  }

  .whatsapp-btn {
    bottom: 16px;
    right: 16px;
  }
}

/* MOBILE */
@media (max-width: 480px) {
  .fixed-btn {
    width: 50px;
    height: 50px;
    font-size: 1.5em;
  }

  .back-to-index {
    bottom: 16px;
    left: 16px;
  }

  .whatsapp-btn {
    bottom: 16px;
    right: 16px;
  }
}
/* MOBILE */
@media (max-width: 480px) {
  .whatsapp-btn {
    width: 50px;
    height: 50px;
    bottom: 16px;
    right: 16px;
    font-size: 1.7em;
  }
}
    
    /* ===========================
       FOOTER
    ============================ */
    footer {
      text-align: center;
      padding: 25px;
      background: #1a1a1a;
      color: #888;
      margin-top: 40px;
      border-top: 1px solid rgba(163,146,97,0.35);
    }

    /* ===========================
       MOBILE
    ============================ */
    @media (max-width: 480px) {
      #side-menu { display: none; }
      section { width: 94%; padding: 24px 16px; }
      header h1 { font-size: 1.8em; }

      .back-to-index {
        width: 48px;
        height: 48px;
        bottom: 16px;
        left: 16px;
        font-size: 1.5em;
      }

      a[target="_blank"]:link,
      a[target="_blank"]:visited {
      color: #A39261;
      }

a[target="_blank"]:hover {
  color: #C8B98A;
}
    }

  </style>
</head>
  <body>

<!-- MENU LATERALE -->
<div id="side-menu">
  <a href="#week1" data-it="Settimana 1" data-en="Week 1">Settimana 1</a>
  <a href="#week2" data-it="Settimana 2" data-en="Week 2">Settimana 2</a>
  <!--  <a href="#week3" data-it="Settimana 3" data-en="Week 3">Settimana 3</a>
  <a href="#week4" data-it="Settimana 4" data-en="Week 4">Settimana 4</a>
  <a href="#week5" data-it="Settimana 5" data-en="Week 5">Settimana 5</a>
  <a href="#week6" data-it="Settimana 6" data-en="Week 6">Settimana 6</a>
  <a href="#week7" data-it="Settimana 7" data-en="Week 7">Settimana 7</a>
  <a href="#week8" data-it="Settimana 8" data-en="Week 8">Settimana 8</a>
  <a href="#week9" data-it="Settimana 9" data-en="Week 9">Settimana 9</a>
  <a href="#week10" data-it="Settimana 10" data-en="Week 10">Settimana 10</a>
  <a href="#week11" data-it="Settimana 11" data-en="Week 11">Settimana 11</a>
  <a href="#week12" data-it="Settimana 12" data-en="Week 12">Settimana 12</a>-->
<a href="index.html#contatti"
   class="btn-contact"
   data-it="Contattaci →"
   data-en="Contact us →">
   Contattaci →
</a> 
</div>

<header>
  <h1 data-it="Cuccioli 2026 – Settimana per settimana"
      data-en="Puppies 2026 – Week by week">
      Cuccioli 2026 – Settimana per settimana
  </h1>

  <p data-it="La crescita dei cuccioli raccontata passo dopo passo"
     data-en="The puppies’ growth told step by step">
     La crescita dei cuccioli raccontata passo dopo passo
  </p>

  <select id="lang-select">
    <option value="it">Italiano</option>
    <option value="en">English</option>
  </select>
</header>

<section>
  <h2 data-it="Diario di crescita" data-en="Growth diary">Diario di crescita</h2>



    <!-- ===========================
       SETTIMANA 1
  ============================ -->
  <div class="week-block" id="week1">
    <h3 data-it="Settimana 1 – I primi giorni"
        data-en="Week 1 – First days">
        Settimana 1 – I primi giorni
    </h3>

    <p data-it="I cuccioli dormono quasi tutto il giorno. Il loro mondo è fatto di latte, calore e il respiro della mamma."
       data-en="The puppies sleep almost all day. Their world is made of milk, warmth and their mom’s breathing.">
       I cuccioli dormono quasi tutto il giorno. Il loro mondo è fatto di latte, calore e il respiro della mamma.
    </p>

    <div class="carousel">
      <div class="carousel-track">
        <img src="img/settimana1-1.jpeg" loading="lazy">
        <img src="img/settimana1-2.jpeg" loading="lazy">
        <img src="img/settimana1-3.jpeg" loading="lazy">
        <img src="img/settimana1-4.jpeg" loading="lazy">
        <img src="img/settimana1-5.jpeg" loading="lazy">
        <img src="img/settimana1-6.jpeg" loading="lazy">
        <img src="img/settimana1-7.jpeg" loading="lazy">
        <!-- <img src="img/settimana1-8.jpeg" loading="lazy">
        <img src="img/settimana1-9.jpeg" loading="lazy">
        <img src="img/settimana1-10.jpeg" loading="lazy">-->
  
      </div>
<!-- FRECCE SOTTO -->
      <div class="carousel-controls">
        <button class="carousel-btn left">❮</button>
        <button class="carousel-btn right">❯</button>
      </div>

<!-- INDICATORI -->
      <div class="carousel-indicators"></div>
  </div>
  </div>

<!-- ===========================
       SETTIMANA 2
  ============================ -->
  <div class="week-block" id="week2">
    <h3 data-it="Settimana 2 – Occhi che si aprono"
        data-en="Week 2 – Eyes opening">
        Settimana 2 – Occhi che si aprono
    </h3>

    <p data-it="Gli occhi iniziano ad aprirsi e i cuccioli scoprono la luce. I movimenti sono lenti, ma pieni di promesse."
       data-en="Their eyes start to open and they discover the light. Movements are slow but full of promise.">
       Gli occhi iniziano ad aprirsi e i cuccioli scoprono la luce. I movimenti sono lenti, ma pieni di promesse.
    </p>

  <div class="carousel">
      <div class="carousel-track">
        <img src="img/settimana2-1.jpeg" loading="lazy">
        <img src="img/settimana2-2.jpeg" loading="lazy">
        <img src="img/settimana2-3.jpeg" loading="lazy">
        <!-- <img src="img/settimana2-4.jpeg" loading="lazy">
        <img src="img/settimana2-5.jpeg" loading="lazy">
        <img src="img/settimana2-6.jpeg" loading="lazy">
        <img src="img/settimana2-7.jpeg" loading="lazy">
        <img src="img/settimana2-8.jpeg" loading="lazy">
        <img src="img/settimana2-9.jpeg" loading="lazy">
        <img src="img/settimana2-10.jpeg" loading="lazy">-->
      </div> 
      
<!-- FRECCE SOTTO-->
      <div class="carousel-controls">
        <button class="carousel-btn left">❮</button>
        <button class="carousel-btn right">❯</button>
      </div>

<!-- INDICATORI-->
      <div class="carousel-indicators"></div>
  </div>

  <!-- ===========================
       SETTIMANA 3
  ============================ -->
  <!-- <div class="week-block" id="week3">
    <h3 data-it="Settimana 3 – Prime esplorazioni"
        data-en="Week 3 – First explorations">
        Settimana 3 – Prime esplorazioni
    </h3>

    <p data-it="Iniziano a tentare i primi passi incerti, si cercano tra loro e la coda accenna i primi timidi scodinzolii."
       data-en="They attempt their first unsteady steps, look for each other and their tails start tiny wagging.">
       Iniziano a tentare i primi passi incerti, si cercano tra loro e la coda accenna i primi timidi scodinzolii.
    </p>

    <div class="carousel">
      <div class="carousel-track">
        <img src="img/settimana3-1.jpeg" loading="lazy">
        <img src="img/settimana3-2.jpeg" loading="lazy">
        <img src="img/settimana3-3.jpeg" loading="lazy">
        <img src="img/settimana3-4.jpeg" loading="lazy">
        <img src="img/settimana3-5.jpeg" loading="lazy">
        <img src="img/settimana3-6.jpeg" loading="lazy">
        <img src="img/settimana3-7.jpeg" loading="lazy">
        <img src="img/settimana3-8.jpeg" loading="lazy">
        <img src="img/settimana3-9.jpeg" loading="lazy">
        <img src="img/settimana3-10.jpeg" loading="lazy">
      </div>
      
 <!-- FRECCE SOTTO
      <div class="carousel-controls">
        <button class="carousel-btn left">❮</button>
        <button class="carousel-btn right">❯</button>
      </div>

<!-- INDICATORI
      <div class="carousel-indicators"></div>
  </div>

  <!-- ===========================
       SETTIMANA 4
  ============================ -->
  <!-- <div class="week-block" id="week4">
    <h3 data-it="Settimana 4 – Carattere e giochi"
        data-en="Week 4 – Personality and play">
        Settimana 4 – Carattere e giochi
    </h3>

    <p data-it="Ogni cucciolo inizia a mostrare un carattere unico: chi è più curioso, chi più riflessivo, chi sempre pronto al gioco."
       data-en="Each puppy starts to show a unique personality: some more curious, some calmer, some always ready to play.">
       Ogni cucciolo inizia a mostrare un carattere unico: chi è più curioso, chi più riflessivo, chi sempre pronto al gioco.
    </p>

    <div class="carousel">
      <div class="carousel-track">
        <img src="img/settimana4-1.jpeg" loading="lazy">
        <img src="img/settimana4-2.jpeg" loading="lazy">
        <img src="img/settimana4-3.jpeg" loading="lazy">
        <img src="img/settimana4-4.jpeg" loading="lazy">
        <img src="img/settimana4-5.jpeg" loading="lazy">
        <img src="img/settimana4-6.jpeg" loading="lazy">
        <img src="img/settimana4-7.jpeg" loading="lazy">
        <img src="img/settimana4-8.jpeg" loading="lazy">
        <img src="img/settimana4-9.jpeg" loading="lazy">
        <img src="img/settimana4-10.jpeg" loading="lazy">
      </div>
      
<!-- FRECCE SOTTO
      <div class="carousel-controls">
        <button class="carousel-btn left">❮</button>
        <button class="carousel-btn right">❯</button>
      </div>

<!-- INDICATORI
      <div class="carousel-indicators"></div>
  </div>


    <!-- ===========================
       ALTRE SETTIMANE DA AGGIUNGERE
  ============================ -->




    <!-- ===========================
       GRAFICO CRESCITA
  ============================
  <div class="chart-container">
    <h3 data-it="Grafico crescita (peso)"
        data-en="Growth chart (weight)">
        Grafico crescita (peso)
    </h3>
    <canvas id="growthChart" width="400" height="200"></canvas>
  </div>
-->
</section>

<footer>
  <span data-it="© 2026 Cuccioli Bobtail Isotta – Tutti i diritti riservati"
        data-en="© 2026 Bobtail Puppies Isotta – All rights reserved">
        © 2026 Cuccioli Bobtail Isotta – Tutti i diritti riservati
  </span>

</footer>

<!-- LIGHTBOX -->
<div id="lightbox">
  <span id="lightbox-prev" class="lightbox-arrow">❮</span>
  <img id="lightbox-img" src="" alt="">
  <span id="lightbox-next" class="lightbox-arrow">❯</span>
  <div id="lightbox-caption"></div>
</div>

<!-- PULSANTE INDEX -->

<a href="index.html"
   class="fixed-btn back-to-index"
   aria-label="Torna all'homepage">
   ←
</a>

<a href="https://wa.me/393391650393"
  class="fixed-btn whatsapp-btn"
   target="_blank"
   aria-label="Contatta su WhatsApp">
   <svg viewBox="0 0 32 32" width="28" height="28" fill="white">
   <path d="M16.001 3.2c-7.064 0-12.8 5.736-12.8 12.8 0 2.256.592 4.448 1.728 6.4L3.2 28.8l6.592-1.696c1.856.992 3.936 1.504 6.208 1.504 7.064 0 12.8-5.736 12.8-12.8s-5.736-12.8-12.8-12.8zm0 23.2c-1.92 0-3.776-.48-5.44-1.408l-.384-.224-3.904 1.008 1.04-3.808-.256-.4c-1.056-1.68-1.616-3.6-1.616-5.568 0-5.92 4.8-10.72 10.72-10.72s10.72 4.8 10.72 10.72-4.8 10.72-10.72 10.72zm6.112-7.84c-.336-.176-1.984-.992-2.288-1.104-.304-.112-.528-.176-.752.176-.224.352-.864 1.104-1.056 1.328-.192.224-.384.256-.72.08-.336-.176-1.424-.528-2.712-1.68-1-.896-1.68-2.016-1.872-2.352-.192-.336-.02-.52.144-.696.148-.148.336-.384.504-.576.168-.192.224-.336.336-.56.112-.224.056-.416-.028-.592-.08-.176-.752-1.808-1.032-2.48-.272-.656-.552-.568-.752-.568-.192 0-.416-.024-.64-.024s-.592.08-.896.416c-.304.336-1.168 1.136-1.168 2.768s1.2 3.2 1.368 3.424c.168.224 2.352 3.6 5.712 5.056.8.344 1.424.552 1.912.704.804.256 1.536.224 2.112.136.648-.096 1.984-.808 2.272-1.592.288-.784.288-1.456.2-1.592-.088-.136-.304-.224-.64-.4z"/>
   </svg>

</a>
  
 

<!-- CHART.JS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
/* ============================================================
   CAMBIO LINGUA
============================================================ */
document.getElementById("lang-select").addEventListener("change", e => {
  const lang = e.target.value;
  document.documentElement.lang = lang;
  document.querySelectorAll("[data-it]").forEach(el => {
    const t = el.getAttribute(`data-${lang}`);
    if (t) el.innerHTML = t;
  });
});

/* ============================================================
   CAROSELLO — VERSIONE DEFINITIVA
   (1 immagine alla volta + frecce sotto + indicatori fissi)
============================================================ */
document.querySelectorAll(".carousel").forEach(carousel => {
  const track = carousel.querySelector(".carousel-track");
  const imgs = [...track.children];
  const left = carousel.querySelector(".carousel-btn.left");
  const right = carousel.querySelector(".carousel-btn.right");
  const indicators = carousel.querySelector(".carousel-indicators");

  let index = 0;
  let startX = 0;
  let currentX = 0;
  let dragging = false;

  /* Indicatori fissi: sempre 3 */
  indicators.innerHTML = `
    <span class="active"></span>
    <span></span>
    <span></span>
  `;

  const updateIndicators = () => {
    const dots = indicators.querySelectorAll("span");
    const pos = index % 3; // cicla tra 0,1,2
    dots.forEach((dot, i) => dot.classList.toggle("active", i === pos));
  };

  /* Funzione di scorrimento corretta */
  const goTo = i => {
    index = (i + imgs.length) % imgs.length;
    const imgWidth = imgs[0].clientWidth; // larghezza reale
    track.style.transition = "transform 0.35s ease";
    track.style.transform = `translateX(-${index * imgWidth}px)`;
    updateIndicators();
  };

  /* Pulsanti */
  if (right) {
    right.addEventListener("click", e => {
      e.stopPropagation();
      goTo(index + 1);
    });
  }

  if (left) {
    left.addEventListener("click", e => {
      e.stopPropagation();
      goTo(index - 1);
    });
  }

  /* Swipe */
  carousel.addEventListener("touchstart", e => {
    startX = e.touches[0].clientX;
    dragging = true;
    track.style.transition = "none";
  });

  carousel.addEventListener("touchmove", e => {
    if (!dragging) return;
    currentX = e.touches[0].clientX;
    const diff = currentX - startX;
    const imgWidth = imgs[0].clientWidth;
    track.style.transform = `translateX(${-(index * imgWidth) + diff}px)`;
  });

  carousel.addEventListener("touchend", () => {
    dragging = false;
    const diff = currentX - startX;
    if (Math.abs(diff) > 50) goTo(index + (diff < 0 ? 1 : -1));
    else goTo(index);
  });

  /* Ricalcolo su resize */
  window.addEventListener("resize", () => {
    const imgWidth = imgs[0].clientWidth;
    track.style.transform = `translateX(-${index * imgWidth}px)`;
  });
});

/* ============================================================
   LIGHTBOX PREMIUM (swipe, pinch, doppio tap, drag, chiusura)
============================================================ */
const lightbox = document.getElementById("lightbox");
const lbImg = document.getElementById("lightbox-img");
const lbCap = document.getElementById("lightbox-caption");
const prev = document.getElementById("lightbox-prev");
const next = document.getElementById("lightbox-next");

let currentImages = [], currentIndex = 0;
let zoom = 1, startX = 0, startY = 0, offsetX = 0, offsetY = 0;
let pinchStart = 0, lastTap = 0;

/* Colleziona tutte le immagini cliccabili */
document.querySelectorAll(".carousel").forEach(carousel => {
  const imgs = [...carousel.querySelectorAll(".carousel-track img")];
  imgs.forEach((img, i) => {
    img.addEventListener("click", () => {
      currentImages = imgs;
      currentIndex = i;
      openLB();
    });
  });
});

function openLB() {
  const img = currentImages[currentIndex];
  lbImg.src = img.src;
  lbCap.textContent = img.alt || "";
  zoom = 1; offsetX = 0; offsetY = 0;
  lbImg.style.transform = "scale(1)";
  lightbox.style.display = "flex";
  lightbox.style.opacity = "1";
}

/* Navigazione */
function show(i) {
  currentIndex = (i + currentImages.length) % currentImages.length;
  openLB();
}

if (prev) prev.addEventListener("click", () => show(currentIndex - 1));
if (next) next.addEventListener("click", () => show(currentIndex + 1));

/* Chiusura con fade-out */
function closeLB() {
  lightbox.style.transition = "opacity 0.25s ease";
  lightbox.style.opacity = "0";
  setTimeout(() => {
    lightbox.style.display = "none";
    lightbox.style.opacity = "1";
  }, 250);
}

/* Chiudi cliccando fuori dall'immagine */
lightbox.addEventListener("click", e => {
  if (e.target === lightbox) closeLB();
});

/* Swipe sinistra/destra + swipe giù per chiudere */
lbImg.addEventListener("touchstart", e => {
  startX = e.touches[0].clientX;
  startY = e.touches[0].clientY;
});

lbImg.addEventListener("touchend", e => {
  const dx = e.changedTouches[0].clientX - startX;
  const dy = e.changedTouches[0].clientY - startY;

  if (zoom === 1 && Math.abs(dx) > 60) {
    show(currentIndex + (dx < 0 ? 1 : -1));
  }
  if (zoom === 1 && dy > 80) {
    closeLB();
  }
});

/* Doppio tap per zoom 1x ↔ 2x */
lbImg.addEventListener("touchend", e => {
  const now = Date.now();
  if (now - lastTap < 300) {
    zoom = zoom === 1 ? 2 : 1;
    offsetX = 0;
    offsetY = 0;
    lbImg.style.transform = `scale(${zoom})`;
  }
  lastTap = now;
});

/* Pinch-to-zoom + pinch-in per chiudere */
lbImg.addEventListener("touchmove", e => {
  if (e.touches.length === 2) {
    e.preventDefault();
    const [t1, t2] = e.touches;
    const dist = Math.hypot(t1.clientX - t2.clientX, t1.clientY - t2.clientY);

    if (!pinchStart) pinchStart = dist;

    const scale = dist / pinchStart;
    zoom = Math.min(Math.max(scale, 1), 4);
    lbImg.style.transform =
      `scale(${zoom}) translate(${offsetX/zoom}px, ${offsetY/zoom}px)`;

    if (dist < pinchStart * 0.6) closeLB();
  }
});

lbImg.addEventListener("touchend", () => {
  pinchStart = 0;
});

/* Drag immagine quando zoom > 1 */
lbImg.addEventListener("touchstart", e => {
  if (zoom > 1 && e.touches.length === 1) {
    startX = e.touches[0].clientX - offsetX;
    startY = e.touches[0].clientY - offsetY;
  }
});

lbImg.addEventListener("touchmove", e => {
  if (zoom > 1 && e.touches.length === 1) {
    offsetX = e.touches[0].clientX - startX;
    offsetY = e.touches[0].clientY - startY;
    lbImg.style.transform =
      `scale(${zoom}) translate(${offsetX/zoom}px, ${offsetY/zoom}px)`;
  }
});

/* Zoom con rotellina su desktop */
lbImg.addEventListener("wheel", e => {
  e.preventDefault();
  zoom += e.deltaY * -0.001;
  zoom = Math.min(Math.max(zoom, 1), 4);
  lbImg.style.transform = `scale(${zoom})`;
});

/* ============================================================
   GRAFICO CRESCITA (Chart.js)
============================================================ */
const ctx = document.getElementById('growthChart');
if (ctx) {
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: ["1","2","3","4","5","6","7","8","9","10","11","12"],
      datasets: [{
        label: "Peso (kg)",
        data: [0.4,0.7,1.1,1.6,2.2,2.8,3.4,4.0,4.6,5.2,5.8,6.4],
        borderColor: "#A39261",
        backgroundColor: "rgba(163,146,97,0.25)",
        borderWidth: 3,
        tension: 0.3,
        pointRadius: 3,
        pointBackgroundColor: "#A39261"
      }]
    },
    options: {
      plugins: {
        legend: { labels: { color: "#e6e6e6" } }
      },
      scales: {
        x: { ticks: { color: "#ccc" }, grid: { color: "#333" } },
        y: { beginAtZero: true, ticks: { color: "#ccc" }, grid: { color: "#333" } }
      }
    }
  });
}
</script>
</body>
</html>
